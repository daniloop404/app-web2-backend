node {
    def mvnHome = "C:\\Program Files\\Apache\\maven"
    def mvnCmd = "\"${mvnHome}\\bin\\mvn.cmd\""

    stage('Clonación del repositorio') {
        // El código de clonación del repositorio ya está manejado por Jenkins debido a la configuración en la interfaz gráfica
        // Este stage puede quedar vacío o utilizarse para fines de diagnóstico si es necesario
    }

    stage('Diagnóstico') {
        bat 'echo Current directory: %cd%'
        bat 'dir'
    }

    stage('Instalación de dependencias') {
        bat "${mvnCmd} clean install"
    }

    stage('Construcción') {
        bat "${mvnCmd} package"
    }
}